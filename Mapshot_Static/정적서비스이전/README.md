# 정적 서비스 이전
## 이슈 
Netlify를 이용한 정적 웹 사이트에서 클라우드 서비스로의 이전

## 원인
### 이사가자
첫 서비스 시작은 netlify를 이용한 정적 웹 호스팅을 이용했다.
하지만 점점 유저들이 원하는 기능도 늘어가고, 클라이언트 단에서 처리할 수 없는 기능들이 추가되면서, 서버의 필요성이 대두되었다.

API 서버로 헤로쿠를 이용해 보기도 했으나, 여러 제약사항들 때문에 결국 별도의 서버를 구축하기로 하였다.

## 해결
### 집구경 다니기
새로 정착할 곳의 조건을 몇 가지 정하기로 했다.
1. 최대한 적은 비용
2. 안정적인 서버 성능
3. 한국 내에 서버 위치

이 조건 내에서 생각나는 클라우드 서비스들을 추려내 보았다.
후보군들은 다음과 같았다.

|종류|CPU|Memeory|Disk|Network Outbound|무료 기간|한국 리전|
|----|----|----|----|----|----|----|
|AWS|vCPU 1|1GB|30GB|100GB|1년|존재|
|네이버|vCPU 1|1GB|50GB|20GB|1년|존재|
|오라클|OCPU 1/8|1GB|50GB|10TB|평생|존재|

다른 클라우드 서비스들과 비교 결과, 
오라클은 무료로 서버 2개까지 제공하고, 고정 IP 제공부터 서버 스펙도 생각보다 널널했다. 오라클의 cpu 스펙이 감이 안와서 몇 가지 테스트 프로그램을 구동해 보았는데, 퍼포먼스가 어느정도 나와서 <strong>오라클로 사용</strong>하기로 결정했다.

### 코드 이주
<div>
<img src="https://user-images.githubusercontent.com/59993347/174504606-62f8dc21-6fbe-4b51-bbd2-91158cf7efbe.jpg" width=600 style="text-align:center; margin:5px;">
<p style="text-align:center; margin:5px;"><strong>관리자 페이지 공지사항 작성 창</strong></p>
</div>

프론트단은 타임리프를 사용해서 재사용되는 코드들을 별도로 다 분류했고, 백단에는 기존 기능 + 별도의 관리자 기능들을 구현했다.
관리자 페이지는 봇들의 접속 시도가 너무 빈번해서, nginx 에서 추가적으로 보안 조치를 취해놓기도 했다. 

## 배운점
- 서버 환경 세팅은 참 번거롭다
    - 도커 학습의 필요성을 느낀다
- 코드를 잘 구분해서 정리해놓자
    - 코드를 기능별로 별도의 패키지로 관리 중이었음
        - UI 관련 HTML
        - 서비스 로직 라이브러리
        - API 서버
    - 덕분에 서비스 이전이 한결 쉬웠다
        - 기존 코드 재사용 (=어느정도 검증된 코드)
        - 새로 작성하는 코드들에 집중 가능