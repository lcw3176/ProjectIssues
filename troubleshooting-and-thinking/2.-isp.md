---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# 2. ISP 차단으로 인한 서비스 장애 대응

## 동기

서비스를 운영해오며 다양한 장애 상황을 겪었습니다.\
그 중 서비스 도메인이 국내 통신사에 의해 차단 당해 겪었던 문제 상황을 정리하고 이에 어떻게 대처했었는지, 재발 방지 대책을 정리하기 위해 작성하게 되었습니다.

## 문제 상황

<figure><img src="../.gitbook/assets/image (6).png" alt=""><figcaption></figcaption></figure>

도메인 제공 업체(Freenom)와 국내 통신사(ISP) 간의 접속 문제가 있었습니다.

Freenom은 인터넷 보급률이 높지 않는 나라의 최상위 도메인을 최대 1년까지 무료로 제공해주는 서비스입니다. 초창기에는 모든 작업을 클라이언트 단에서 처리했기 때문에 정적 웹 호스팅 서비스(Netlify)와Freenom에서 제공하는 도메인을 이용하여 서비스를 제공하고 있었습니다.

그런데 느닷없이 서비스에 접속이 불가능했고, 신속하게 무엇이 원인인지 밝혀내야 했습니다.\
정확한 원인은 밝혀내지 못했지만, 이전부터 국내 통신망을 이용해서 Freenom에서 호스팅하는 서비스에 접속 시도 시 간헐적으로 연결이 강제로 차단되는 문제가 있었고, 해당 증상은 짧으면 몇 시간, 길면 며칠 단위로 지속된다는 사실을 알아냈습니다.\
VPN을 사용하거나 DNS 서버의 주소를 Freenom의 안내에 따라 변경하면 서비스 접속이 가능했으나, 이 방법을 모든 유저에게 권장하는 것은 현실적으로 불가능했습니다.

## 대응

<figure><img src="../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

도메인 변경 후, 신속히 유저들에게 새로운 도메인을 안내하는 방식으로 해결했습니다.

그리고 접속이 불안정한 Freenom 도메인의 페이지에는 새로운 페이지로 접속을 유도하는 글귀를 남겨 놓았습니다. 해당 도메인에 리다이렉트 설정을 걸어 놓는 방안도 생각해 보았지만 동일 문제가 반복된다면 이 대처는 무용지물이 될 것이라고 생각했기 때문에 최대한 새로운 도메인을 유저에게 알리는 방식으로 진행하게 되었습니다.

## 재발 방지 대책

사실 이런 일이 발생하지 않도록 예방하는 것이 최선이고, 막을 수 있는 문제였습니다.\
이미 인터넷에 관련 글들이 있었지만 미리 적극적으로 조사해보지 않은 점이 가장 큰 패인 이었습니다.

앞으로 다른 서비스를 런칭하게 된다면, 실제 운영 도메인 관리는 AWS의 Route53이나 CloudFlare같은 검증된 보편적인 업체를 통해서 구매한다면 이런 문제는 겪지 않을 것이라 생각합니다.

