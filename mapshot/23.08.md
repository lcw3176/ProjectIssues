---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# 23.08 / 이미지 렌더링 문제

<figure><img src="../.gitbook/assets/mapshot_경기 하남시 배알미동 산 126-3.jpg" alt=""><figcaption><p>군데군데 깨진 이미지</p></figcaption></figure>

## 상황 인지

### 계속되던 문제, But Why?

&#x20;위성 이미지를 가져오다 보면 종종 회색 타일들이 보이는 문제가 있다.\
지도 로딩이 끝나지 않아서 대체 이미지가 떠 있는 상태 그대로 가져오는 것인데, 꽤나 오래 전부터 이 사실을 인지하고 있었고 해결하기 위해 다양한 방식을 도입해 보았다.

&#x20;결론부터 말하자면 여전히 저 문제는 발생하고 있지만, 어느 정도는 의도한 상황이다.\
에러 못 잡아서 변명하는 것 같지만, 지금부터 글을 읽다 보면 어떤 가치들을 트레이드 오프 했는지 충분히 납득할 수 있으리라 생각한다.

## 진행 과정

### 지도 생성 방식의 차이

&#x20;지금 맵샷은 3가지의 지도 타입을 제공하고 있다.\
그 중 한 가지(`네이버`)는 내가 직접 좌표 계산을 해서 위성 이미지 타일 하나하나를 호출하고 있기 때문에 에러 감지가 비교적 단순하다. Http request 성공 / 실패 여부로 확인하면 된다.

하지만 나머지 2가지(`카카오`, `구글`)는 해당 회사에서 제공해주는 자바스크립트 라이브러리로 브라우저에서 동적으로 생성하기 때문에, 이미지 호출 성공 여부가 전적으로 해당 라이브러리 내부 구현에 달려 있다.&#x20;

내가 문제를 겪고 있는 것은 후자의 방식으로 생성하고 있는 지도들이다.

### 첫 번째 시도, tilesloaded 이벤트

<figure><img src="../.gitbook/assets/image (29).png" alt=""><figcaption><p>카카오 지도 API Docs</p></figcaption></figure>

&#x20;&#x20;
