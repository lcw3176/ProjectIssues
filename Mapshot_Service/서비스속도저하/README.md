# 서비스 속도 저하

## 공존할 수 없는 사이
![리소스](https://user-images.githubusercontent.com/59993347/176369173-445c6d38-3379-4308-9c7c-55ed246aa5d5.png)

오라클 클라우드 서비스는 무료로 서버를 2개 제공해준다. 그래서 한대의 서버는 jenkins를 이용한 배포 서버로 활용하고, 나머지 한대는 서비스를 운영중이었는데, 꽤 치명적인 문제를 발견했다.
이미지 API가 작동에 들어가면, 서버 cpu 리소스를 있는대로 다 끌어다 써서, 다른 부가적인 웹서비스에도 영향을 미치는 것이었다.
단순 접속조차 버벅일 뿐만 아니라, 공지사항 읽기, 사용법 등 모든것이 느려졌다. 여러 고민 끝에, 행동을 시작했다.

## Farewell To Jenkins
내가 내린 결론은 젠킨스 배포 서버를 없애고, 그곳에 이미지 API 서버만 구동시키는 것이었다. 서버 스펙 업을 위해 추가 과금할 정도의 수익 모델은 없기 때문에, 무료로 주어진 2개의 서버를 최대한 활용하자는 취지였다. 젠킨스를 대신해서 Github Action을 통해 다시 빌드, 배포 시스템을 구축하였고, nginx의 내부 설정도 바꿔주었다.

## 효과는?
의외로 훨씬 얻은점이 많은 시스템 교체였다.
먼저 <strong>빌드</strong>가 깃허브 리소스를 사용하다 보니 <strong>훨씬 빠르게 진행</strong>되었고, 서버 리소스도 이전보다 여유로워져서 서비스도 이전보다 훨씬 쾌적하게 이루어졌다. 배포 서버가 운영 서버에 비해 놀고 있다는 생각이 항상 평소에 들었었는데, 이 점이 해결되어서 만족스럽다. 